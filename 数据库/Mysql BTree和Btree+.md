## b树和b+树的区别

### b树

1. 每一个叶子节点都有形同的度（存储数据的个数相同）
2. 所有叶子节点的数据都是从左到右递增的
3. 叶节点指针为空

### b+ 树！

1. 非叶子节点不存实际的数据，只存指针，这个样可以提高每一个叶子节点存储指针的数量，是数量可控
2. 只有叶子节点存储数据
3. 叶子节点存储指针，指向下一个节点的磁盘地址，这样可以减少io(不用再从上而下查找了)

![image-20200414174644386](Mysql%20BTree%E5%92%8CBtree+.assets/image-20200414174644386.png)

![image-20200414174657314](Mysql%20BTree%E5%92%8CBtree+.assets/image-20200414174657314.png)

## hash

![image-20200414180704157](Mysql%20BTree%E5%92%8CBtree+.assets/image-20200414180704157.png)



## 聚集索引和非聚集索引的区别

1. 聚集索引和非聚集索引都是使用b+树的数据结构

2. 聚集索引:主键索引叶子节点存储了数据，非主键索引，叶子节点存储的是主键的id,所以如果是非主键索引查询的时候，还需要根据id来查询再次回表产查询数据
3. 非聚集索引叶子节点存储的是磁盘指针，不管是否为主键索引，都只需要查询到找到指针定位到数据



## innodb（聚集索引）

1. 磁盘表文件有两个，一个是保存表的结构（frm）,另一个保存表的索引和数据
2. innodb怎么保证有主键，为什么推荐自增类型的整型作为主键
   1. 表如果没有设置主键，innodb查看索引类型为unique的索引，让他作为主键
   2. 如果也没有unique的索引，innodb会自己生成一个索引主键，作为表的索引
   3. int类型所占的空间小，好比较。字符串类型占用空间大，字符串之间的比较相对复杂，需要每一个字符进行比较
3. 为什么非主键索引叶子节点存储的不是数据而是主键
   1. 因为，如果都存数据，会产生数据的副本，一致性不好保证，也会造成磁盘资源的浪费

![image-20200414181215321](Mysql%20BTree%E5%92%8CBtree+.assets/image-20200414181215321.png)



![image-20200414180939123](Mysql%20BTree%E5%92%8CBtree+.assets/image-20200414180939123.png)

![image-20200414181033062](Mysql%20BTree%E5%92%8CBtree+.assets/image-20200414181033062.png)

## myisam

1. myisam使用的非聚集索引
2. 索引叶子节点存储的是磁盘指针

![image-20200414181927431](Mysql%20BTree%E5%92%8CBtree+.assets/image-20200414181927431.png)

## 联合索引

1. 联合索引是使用联合的字段作为key
2. 



![image-20200414182116868](Mysql%20BTree%E5%92%8CBtree+.assets/image-20200414182116868.png)